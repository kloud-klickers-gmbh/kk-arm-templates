{
    "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "baseTime": {
            "type": "string",
            "defaultValue": "[utcNow()]"
        }
    },
    "variables": {
    },
    "resources": [
        {
            "type": "Microsoft.PolicyInsights/remediations",
            "apiVersion": "2021-10-01",
            "name": "[concat('Update Policy Windows Remediation ', guid(parameters('baseTime')))]",
            "properties": {
                "policyAssignmentId": "[resourceId('Microsoft.Authorization/policyassignments', concat('Update Policy Windows ', subscription().subscriptionId))]",
                "resourceDiscoveryMode": "ReEvaluateCompliance"
            }
        },
        {
            "type": "Microsoft.PolicyInsights/remediations",
            "apiVersion": "2021-10-01",
            "name": "[concat('Update Policy Linux Remediation ', guid(parameters('baseTime')))]",
            "properties": {
                "policyAssignmentId": "[resourceId('Microsoft.Authorization/policyassignments', concat('Update Policy Linux ', subscription().subscriptionId))]",
                "resourceDiscoveryMode": "ReEvaluateCompliance"
            }
        },
        {
            "type": "Microsoft.PolicyInsights/remediations",
            "apiVersion": "2021-10-01",
            "name": "[concat('KK Periodic Update Schedule Remediation ', guid(parameters('baseTime')))]",
            "properties": {
                "policyAssignmentId": "[resourceId('Microsoft.Authorization/policyassignments', concat('Update Schedule Policy ', subscription().subscriptionId))]",
                "resourceDiscoveryMode": "ReEvaluateCompliance"
            }
        },
        {
            "type": "Microsoft.PolicyInsights/remediations",
            "apiVersion": "2021-10-01",
            "name": "[concat('AMA Policy VM Remediation ', guid(parameters('baseTime')))]",
            "properties": {
                "policyAssignmentId": "[resourceId('Microsoft.Authorization/policyassignments', concat('AMA Policy VM ', subscription().subscriptionId))]",
                "resourceDiscoveryMode": "ReEvaluateCompliance"
            }
        }
    ]
}